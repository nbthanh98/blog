---
title: Quản lý cấu hình ứng dụng với ConfigMap và Secret trong Kubernetes
date: '2022-12-10'
tags: ['api', 'rest-api', 'springboot', 'kubernetes']
series: ['k8s-spring-boot']
draft: false
authors: ['thanhnb']
images: ['/static/images/ogps/k8s-springboot.png']
summary: 'Trong bài này chúng ta sẽ tìm hiểu cách quản lý cấu hình ứng dụng với ConfigMap và Secret trong Kubernetes.'
index: 5
---

<TOCInline toc={props.toc} asDisclosure />

## 1. Giới thiệu chung

Trong những bài trước những cấu hình của ứng dụng như: thông tin database (username, password) hoặc thông tin URI gọi đến các ứng dụng khác. Thông thường các ứng dụng thường tách biệt code và cấu hình ứng dụng để dễ dàng quản lý và cấu hình cho ứng dụng theo từng môi trường. Trong chuỗi bài này hai ứng dụng Java Spring Boot là Courses-service và Students-service đều cấu hình bằng các biến môi trường rồi khi triển khai ứng dụng sẽ cung cấp các biến môi trường này ở runtime. Ở bài viết này chúng ta cùng nhau tìm hiểu hai đối tượng giúp lưu trữ những cấu hình đó là ConfigMap và Secret trong Kubernetes.

## 2. ConfigMap và Secret trong Kubernetes là gì?

- **ConfigMap** đối tượng trong Kubernetes giúp lưu trữ các thông tin cấu hình của ứng dụng dưới dạng key-value. ConfigMap thường được dùng để cấu hình những thông tin ít nhạy cảm và các data cấu hình trong ConfigMap hiển thị dưới dạng plain text. Pods của ứng dụng có thể lấy thông tin cấu hình từ ConfigMap giống như các biến môi trường, command-line hoặc các file cấu hình dưới dạng volume. ConfigMap cần triển khai trước khi triển khai ứng dụng nếu không các pod của ứng dụng sẽ không start được vì không tìm thấy ConfigMap.

  Bạn có thể tìm hiểu thêm ConfigMap tại [trang web chính thức của Kubernetes](https://kubernetes.io/docs/concepts/configuration/configmap/).

- **Secret** là đối tượng trong Kubernetes giúp lưu trữ các thông tin cấu hình của ứng dụng dưới dạng key-value. Secret thì thường được dùng để cấu hình các thông tin nhạy cảm như: thông tin database (username, password), thông tin secretKey, accessKey,... và các thông tin cấu hình này sẽ được mã hóa bằng base64. Secret phải được triển khai trước khi triển khai ứng dụng nếu không pod của ứng dụng sẽ không start được vì không tìm thấy Secret.

  Bạn có thể tìm hiểu thêm Secret tại [trang web chính thức của Kubernetes](https://kubernetes.io/docs/concepts/configuration/secret/).

## 3. Cách tạo ConfigMap và Secret trong Kubernetes
